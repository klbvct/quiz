# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - –ü—Ä–∏–º–µ–Ω–µ–Ω–æ

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (22.12.2025)

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∫–≤–∏–∑–∞
**–§–∞–π–ª**: `app/Http/Controllers/QuizController.php`

**–ü—Ä–æ–±–ª–µ–º–∞**: N+1 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –º–æ–¥—É–ª—è
- **–î–æ**: 20-40 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ `updateOrCreate()` –≤ —Ü–∏–∫–ª–µ
- **–ü–æ—Å–ª–µ**: 1 –º–∞—Å—Å–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å `upsert()`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 10-15 —Ä–∞–∑

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –ë–î
**–§–∞–π–ª**: `database/migrations/2025_12_22_000001_add_indexes_to_quiz_tables.php`

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã**:
- `quiz_answers`:
  - `['session_id', 'module_number']` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ —Å–µ—Å—Å–∏–∏
  - `question_number` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
  
- `quiz_sessions`:
  - `['user_id', 'status']` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
  - `completed_at` - –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é
  - `current_module` - –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –º–æ–¥—É–ª—è–º

- `quiz_results`:
  - `user_id` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–§–∞–π–ª**: `app/Http/Controllers/Admin/UserManagementController.php`

**–£–ª—É—á—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω –ª–∏—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å `QuizSession::where(...)->delete()`, 
—Ç–∞–∫ –∫–∞–∫ –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö —á–µ—Ä–µ–∑ `onDelete('cascade')`.

## üìã –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
```bash
cd c:\Users\user\Downloads\quiz\backend
php artisan migrate
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (production):
```bash
cd /path/to/your/project/backend
php artisan migrate --force
```

### –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```bash
php artisan migrate:rollback
```

## üéØ –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ MySQL:
```sql
SHOW INDEX FROM quiz_answers;
SHOW INDEX FROM quiz_sessions;
SHOW INDEX FROM quiz_results;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
```sql
EXPLAIN SELECT * FROM quiz_answers WHERE session_id = 1 AND module_number = 2;
EXPLAIN SELECT * FROM quiz_sessions WHERE user_id = 1 AND status = 'in_progress';
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤**: 10-15x –±—ã—Å—Ç—Ä–µ–µ
- **–ü–æ–∏—Å–∫ —Å–µ—Å—Å–∏–π**: 5-10x –±—ã—Å—Ç—Ä–µ–µ
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**: 3-5x –±—ã—Å—Ç—Ä–µ–µ
- **–û–±—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î**: —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 60-80%

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏–Ω–¥–µ–∫—Å—ã, –Ω–µ –º–µ–Ω—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è
- –û—Ç–∫–∞—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ

## üîç –ß—Ç–æ –µ—â–µ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–º

1. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ Redis
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å lazy loading –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
3. –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É JSON —Ñ–∞–π–ª–æ–≤ –º–æ–¥—É–ª–µ–π
