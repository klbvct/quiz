# AI-Генерація професійних рекомендацій

## Налаштування Google Gemini API

Система використовує Google Gemini API для генерації персоналізованих професійних рекомендацій на основі результатів тестування.

### Отримання API ключа

1. Перейдіть на [Google AI Studio](https://aistudio.google.com/app/apikey)
2. Увійдіть у свій Google акаунт
3. Натисніть **"Get API key"** або **"Create API key"**
4. Скопіюйте згенерований API ключ

### Налаштування у проекті

1. Відкрийте файл `.env` у директорії `backend/`
2. Додайте або оновіть наступні налаштування:

```env
# Google Gemini Configuration
GEMINI_API_KEY=your_api_key_here
GEMINI_MODEL=gemini-1.5-flash
GEMINI_API_URL=https://generativelanguage.googleapis.com/v1beta/models
```

3. Замініть `your_api_key_here` на ваш справжній API ключ

### Доступні моделі Gemini

- **gemini-1.5-flash** (рекомендується) - швидка модель з хорошою якістю
- **gemini-1.5-pro** - більш потужна модель для складних завдань
- **gemini-1.0-pro** - базова модель

### Безкоштовні ліміти

Google Gemini надає безкоштовний рівень використання:

- **gemini-1.5-flash**: 15 запитів на хвилину (RPM), 1 млн токенів на день
- **gemini-1.5-pro**: 2 запити на хвилину, 32,000 токенів на день
- **gemini-1.0-pro**: 15 запитів на хвилину

Більше інформації: https://ai.google.dev/pricing

### Як працює система

1. **Збір даних**: Система аналізує всі результати тестування користувача (модулі 1-8)
2. **Формування контексту**: На основі результатів формується профіль:
   - Код Голланда (RIASEC)
   - Домінуючі типи мислення
   - Типи інтелекту
   - Ціннісні орієнтири
   - Мотиваційні фактори
   - Тип сприйняття
3. **AI-генерація**: Gemini генерує 3-4 професійні напрямки з конкретними спеціальностями
4. **Структура відповіді**: 
   - **Major** - основні напрямки бакалавріату (3-5 спеціальностей)
   - **Minor** - додаткові дисципліни для розвитку (2-4 курси)

### Fallback механізм

Якщо API ключ не налаштований або виникла помилка, система автоматично використовує резервні рекомендації на основі Holland типу особистості.

### Тестування

Після налаштування API ключа:

1. Пройдіть тестування або використайте існуючого користувача
2. Перегенеруйте результати:
   ```bash
   php artisan quiz:recalculate --user-id=1
   ```
3. Перегляньте PDF звіт - у розділі "Рекомендації до вибору професійних напрямків" повинні з'явитися AI-згенеровані рекомендації

### Логування

Всі помилки AI-генерації логуються у файл `storage/logs/laravel.log`:

```bash
tail -f storage/logs/laravel.log | grep "career recommendations"
```

### Приклад відповіді від Gemini

```json
{
  "career_paths": [
    {
      "direction": "Креативні індустрії (major)",
      "type": "creative",
      "majors": [
        "Аудіовізуальне мистецтво і виробництво (режисура)",
        "Multimedia Art",
        "Графічний дизайн"
      ],
      "minors": [
        "Film production (minor)",
        "Digital Marketing (minor)"
      ]
    }
  ]
}
```

### Налагодження

Якщо рекомендації не генеруються:

1. Перевірте наявність API ключа у `.env`
2. Перегляньте логи: `storage/logs/laravel.log`
3. Перевірте квоти API: https://aistudio.google.com/
4. Переконайтеся, що є з'єднання з інтернетом
5. Перевірте, чи правильно заповнені всі модулі тестування

### Безпека

⚠️ **Важливо**: Ніколи не комітьте файл `.env` з API ключем у Git!

API ключ зберігається лише локально у файлі `.env` і не повинен потрапити у публічний репозиторій.
